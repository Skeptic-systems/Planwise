---
import Layout from "../layouts/Layout.astro";
import { LoginForm } from "../auth/login-form";

const redirectTo = Astro.url.searchParams.get('redirectTo') || '/dashboard';
---

<Layout title="Planwise – Login">
  <div class="grid min-h-screen lg:grid-cols-2">
    <!-- Left Panel -->
    <div class="flex flex-col justify-between p-8 lg:p-12 bg-black text-white">
      <!-- Top Brand -->
      <div class="flex items-center gap-3">
        <img src="/whiteplanwise.svg" alt="Planwise Logo" class="w-8 h-8" />
        <a href="/" class="text-lg font-semibold tracking-tight hover:underline">Planwise</a>
      </div>

      <!-- Login Form Section -->
      <div class="flex flex-1 items-center justify-center">
        <div class="w-full max-w-sm space-y-6">
          <LoginForm client:load redirectTo={redirectTo} />
        </div>
      </div>

      <!-- Footer -->
      <div class="text-xs text-gray-500 text-center lg:text-left">
        © {new Date().getFullYear()} Planwise. All rights reserved.
      </div>
    </div>

    <!-- Right Panel with Image -->
    <div class="relative hidden lg:block">
      <img
        src="/loginbg.jpg"
        alt="Login Background"
        class="absolute inset-0 h-full w-full object-cover brightness-75"
      />
      <div class="absolute inset-0 bg-gradient-to-tr from-black/80 via-black/60 to-black/20" />
    </div>
  </div>
</Layout>
